<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=$sourceEncoding$">
    $if(autoRefresh)$
    <meta http-equiv="refresh" content="$autoRefreshInterval$">
    $endif$
    <title>Jasmine Spec Runner</title>
    $cssDependencies$
    $javascriptDependencies$
    <link rel="stylesheet" type="text/css" href="test/lib/js-testing/css/bootstrap-stub.css">
    <script type="text/javascript" src="src/lib/require/require.js"></script>
    $preloadScriptTags$
</head>

<body>
<script type="text/javascript">
    require($customRunnerConfiguration$, function() {
        (function() {
            var specDir = '$specDir$';

            if (!specDir.match(/^file/)) {
                specDir = '/' + specDir;
            }

            require.config({
                paths: {
                    jasmineJquery: '/test/lib/js-testing/js/jasmine/jasmine-jquery',
                    jasmineCustomMatcher: '/test/lib/js-testing/js/jasmine/jasmine-custom-matcher',
	                jasmineSinon: '/test/lib/js-testing/js/jasmine-sinon/jasmine-sinon',
                    jquery: '/src/lib/jquery/jquery',
                    sinon: '/test/lib/js-testing/js/sinon/sinon-1.9.0',
                    sinonie: '/test/lib/js-testing/js/sinon/sinon-ie-1.9.0',
                    specs: specDir,
                    underscore: '/src/lib/underscore/underscore'
                },
                shim: {
                    jasmineJquery: {
                        deps: ['jquery']
                    },
                    jasmineCustomMatcher: {
                        deps: ['jquery']
                    },
	                jasmineSinon: {
		                deps: ['jasmineJquery', 'sinon']
	                },
                    sinon: {
                        exports: 'sinon'
                    },
                    sinonie: ['sinon'],
                    underscore: {
                        exports: '_'
                    }
                }
            });
        })();

        require(['underscore', 'jasmineJquery', 'jasmineCustomMatcher', 'jquery', 'sinonie', 'jasmineSinon'], function() {
            jQuery.support.cors = true;

            var specs = $specsList$;

            require(specs, function() {
                window.reporter = new jasmine.$reporter$();
                jasmine.getEnv().addReporter(reporter);

                if ('$reporter$' === 'HtmlReporter') {
                    jasmine.getEnv().specFilter = function(spec) {
                        return window.reporter.specFilter(spec);
                    };
                }
                else if ('$reporter$' === 'JsApiReporter') {
                    jasmine.getEnv().updateInterval = Number.MAX_VALUE;
                }

                jasmine.getEnv().execute();
            });
        });
    });
</script>
</body>
</html>